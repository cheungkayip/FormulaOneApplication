package f1.app.ergast.url;

import org.json.JSONException;
import org.junit.Test;
import org.skyscreamer.jsonassert.JSONAssert;

import java.io.IOException;

/**
 * Created by kayipcheung on 01-12-15.
 */
public class ErgastTest {
    @Test
    public void testDriversJSON() throws IOException, JSONException {
        Ergast ergast = new Ergast();
        String urlData = ergast.callUrlToGetJSONData("http://ergast.com/api/f1/2015/drivers.json");
        String expected = "{\"MRData\":{\"xmlns\":\"http:\\/\\/ergast.com\\/mrd\\/1.4\",\"series\":\"f1\",\"url\":\"http://ergast.com/api/f1/2015/drivers.json\",\"limit\":\"30\",\"offset\":\"0\",\"total\":\"22\",\"DriverTable\":{\"season\":\"2015\",\"Drivers\":[{\"driverId\":\"alonso\",\"permanentNumber\":\"14\",\"code\":\"ALO\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Fernando_Alonso\",\"givenName\":\"Fernando\",\"familyName\":\"Alonso\",\"dateOfBirth\":\"1981-07-29\",\"nationality\":\"Spanish\"},{\"driverId\":\"bottas\",\"permanentNumber\":\"77\",\"code\":\"BOT\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Valtteri_Bottas\",\"givenName\":\"Valtteri\",\"familyName\":\"Bottas\",\"dateOfBirth\":\"1989-08-29\",\"nationality\":\"Finnish\"},{\"driverId\":\"button\",\"permanentNumber\":\"22\",\"code\":\"BUT\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Jenson_Button\",\"givenName\":\"Jenson\",\"familyName\":\"Button\",\"dateOfBirth\":\"1980-01-19\",\"nationality\":\"British\"},{\"driverId\":\"ericsson\",\"permanentNumber\":\"9\",\"code\":\"ERI\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Marcus_Ericsson\",\"givenName\":\"Marcus\",\"familyName\":\"Ericsson\",\"dateOfBirth\":\"1990-09-02\",\"nationality\":\"Swedish\"},{\"driverId\":\"grosjean\",\"permanentNumber\":\"8\",\"code\":\"GRO\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Romain_Grosjean\",\"givenName\":\"Romain\",\"familyName\":\"Grosjean\",\"dateOfBirth\":\"1986-04-17\",\"nationality\":\"French\"},{\"driverId\":\"hamilton\",\"permanentNumber\":\"44\",\"code\":\"HAM\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Lewis_Hamilton\",\"givenName\":\"Lewis\",\"familyName\":\"Hamilton\",\"dateOfBirth\":\"1985-01-07\",\"nationality\":\"British\"},{\"driverId\":\"hulkenberg\",\"permanentNumber\":\"27\",\"code\":\"HUL\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Nico_H%C3%BClkenberg\",\"givenName\":\"Nico\",\"familyName\":\"Hülkenberg\",\"dateOfBirth\":\"1987-08-19\",\"nationality\":\"German\"},{\"driverId\":\"kvyat\",\"permanentNumber\":\"26\",\"code\":\"KVY\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Daniil_Kvyat\",\"givenName\":\"Daniil\",\"familyName\":\"Kvyat\",\"dateOfBirth\":\"1994-04-26\",\"nationality\":\"Russian\"},{\"driverId\":\"kevin_magnussen\",\"permanentNumber\":\"20\",\"code\":\"MAG\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Kevin_Magnussen\",\"givenName\":\"Kevin\",\"familyName\":\"Magnussen\",\"dateOfBirth\":\"1992-10-05\",\"nationality\":\"Danish\"},{\"driverId\":\"maldonado\",\"permanentNumber\":\"13\",\"code\":\"MAL\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Pastor_Maldonado\",\"givenName\":\"Pastor\",\"familyName\":\"Maldonado\",\"dateOfBirth\":\"1985-03-09\",\"nationality\":\"Venezuelan\"},{\"driverId\":\"massa\",\"permanentNumber\":\"19\",\"code\":\"MAS\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Felipe_Massa\",\"givenName\":\"Felipe\",\"familyName\":\"Massa\",\"dateOfBirth\":\"1981-04-25\",\"nationality\":\"Brazilian\"},{\"driverId\":\"merhi\",\"permanentNumber\":\"98\",\"code\":\"MER\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Roberto_Merhi\",\"givenName\":\"Roberto\",\"familyName\":\"Merhi\",\"dateOfBirth\":\"1991-03-22\",\"nationality\":\"Spanish\"},{\"driverId\":\"nasr\",\"permanentNumber\":\"12\",\"code\":\"NAS\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Felipe_Nasr\",\"givenName\":\"Felipe\",\"familyName\":\"Nasr\",\"dateOfBirth\":\"1992-08-21\",\"nationality\":\"Brazilian\"},{\"driverId\":\"perez\",\"permanentNumber\":\"11\",\"code\":\"PER\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Sergio_P%C3%A9rez\",\"givenName\":\"Sergio\",\"familyName\":\"Pérez\",\"dateOfBirth\":\"1990-01-26\",\"nationality\":\"Mexican\"},{\"driverId\":\"raikkonen\",\"permanentNumber\":\"7\",\"code\":\"RAI\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Kimi_R%C3%A4ikk%C3%B6nen\",\"givenName\":\"Kimi\",\"familyName\":\"Räikkönen\",\"dateOfBirth\":\"1979-10-17\",\"nationality\":\"Finnish\"},{\"driverId\":\"ricciardo\",\"permanentNumber\":\"3\",\"code\":\"RIC\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Daniel_Ricciardo\",\"givenName\":\"Daniel\",\"familyName\":\"Ricciardo\",\"dateOfBirth\":\"1989-07-01\",\"nationality\":\"Australian\"},{\"driverId\":\"rosberg\",\"permanentNumber\":\"6\",\"code\":\"ROS\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Nico_Rosberg\",\"givenName\":\"Nico\",\"familyName\":\"Rosberg\",\"dateOfBirth\":\"1985-06-27\",\"nationality\":\"German\"},{\"driverId\":\"rossi\",\"code\":\"RSS\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Alexander_Rossi_%28racing_driver%29\",\"givenName\":\"Alexander\",\"familyName\":\"Rossi\",\"dateOfBirth\":\"1991-09-25\",\"nationality\":\"American\"},{\"driverId\":\"sainz\",\"permanentNumber\":\"55\",\"code\":\"SAI\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Carlos_Sainz_Jr.\",\"givenName\":\"Carlos\",\"familyName\":\"Sainz\",\"dateOfBirth\":\"1994-09-01\",\"nationality\":\"Spanish\"},{\"driverId\":\"stevens\",\"permanentNumber\":\"28\",\"code\":\"STE\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Will_Stevens\",\"givenName\":\"Will\",\"familyName\":\"Stevens\",\"dateOfBirth\":\"1991-06-28\",\"nationality\":\"British\"},{\"driverId\":\"max_verstappen\",\"permanentNumber\":\"33\",\"code\":\"VES\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Max_Verstappen\",\"givenName\":\"Max\",\"familyName\":\"Verstappen\",\"dateOfBirth\":\"1997-09-30\",\"nationality\":\"Dutch\"},{\"driverId\":\"vettel\",\"permanentNumber\":\"5\",\"code\":\"VET\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Sebastian_Vettel\",\"givenName\":\"Sebastian\",\"familyName\":\"Vettel\",\"dateOfBirth\":\"1987-07-03\",\"nationality\":\"German\"}]}}}\n";
        JSONAssert.assertEquals(expected,urlData, true);
    }

    @Test
    public void testConstructorsJSON() throws IOException, JSONException {
        Ergast ergast = new Ergast();
        String urlData = ergast.callUrlToGetJSONData("http://ergast.com/api/f1/2015/constructors.json");
        String expected = "{\"MRData\":{\"xmlns\":\"http:\\/\\/ergast.com\\/mrd\\/1.4\",\"series\":\"f1\",\"url\":\"http://ergast.com/api/f1/2015/constructors.json\",\"limit\":\"30\",\"offset\":\"0\",\"total\":\"11\",\"ConstructorTable\":{\"season\":\"2015\",\"Constructors\":[{\"constructorId\":\"ferrari\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Scuderia_Ferrari\",\"name\":\"Ferrari\",\"nationality\":\"Italian\"},{\"constructorId\":\"force_india\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Force_India\",\"name\":\"Force India\",\"nationality\":\"Indian\"},{\"constructorId\":\"lotus_f1\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Lotus_F1\",\"name\":\"Lotus F1\",\"nationality\":\"British\"},{\"constructorId\":\"manor\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Manor_Motorsport\",\"name\":\"Manor Marussia\",\"nationality\":\"British\"},{\"constructorId\":\"marussia\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Marussia_F1\",\"name\":\"Marussia\",\"nationality\":\"Russian\"},{\"constructorId\":\"mclaren\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/McLaren\",\"name\":\"McLaren\",\"nationality\":\"British\"},{\"constructorId\":\"mercedes\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Mercedes-Benz_in_Formula_One\",\"name\":\"Mercedes\",\"nationality\":\"German\"},{\"constructorId\":\"red_bull\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Red_Bull_Racing\",\"name\":\"Red Bull\",\"nationality\":\"Austrian\"},{\"constructorId\":\"sauber\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Sauber\",\"name\":\"Sauber\",\"nationality\":\"Swiss\"},{\"constructorId\":\"toro_rosso\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Scuderia_Toro_Rosso\",\"name\":\"Toro Rosso\",\"nationality\":\"Italian\"},{\"constructorId\":\"williams\",\"url\":\"http:\\/\\/en.wikipedia.org\\/wiki\\/Williams_Grand_Prix_Engineering\",\"name\":\"Williams\",\"nationality\":\"British\"}]}}}\n";
        JSONAssert.assertEquals(expected,urlData, true);
    }
}
